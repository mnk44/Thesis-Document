\chapter*{Capítulo 2 \vspace{0.5cm} \break Desarrollo del nuevo sistema}
\setcounter{chapter}{2}
\setcounter{section}{0}
\addcontentsline{toc}{chapter}{Capítulo 2: Desarrollo del nuevo sistema}

En el siguiente capítulo se presenta la propuesta de solución para la problemática planteada: el nuevo sistema SECPROIT. Para que el desarrollo de un proyecto concluya con éxitos, primero debe realizarse el diseño de lo que se pretende obtener, así como analizar los requisitos que debe cumplir. A lo largo de este capítulo se presentarán los diagramas utilizados en la elaboración del sistema, se explicará como está estructurado y cuáles son sus funciones. Cabe destacar que este nuevo diseño parte del que se tenía anteriormente en el SECPROIT, por lo que se realizarán algunas comparaciones dicho modelo.

\section{Descripción del negocio}
Como ya se ha observado en secciones anteriores, lo que se pretende conseguir con este nuevo sistema es rectificar las limitaciones existentes en el SECPROIT actual. Para ello, el nuevo software debe satisfacer el objetivo principal: capacitar a los operarios ante los procesos productivos de una fábrica.
Partiendo de esa idea, esta solución debe poseer un modelo de entrenamiento que ponga a prueba a los operarios de la industria, además, debe contar con un administrador que sea el responsable de incluir a los todos usuarios.

A la hora de realizar el entrenamiento, se deben evaluar tres etapas fundamentales: una para validar los conocimientos sobre las variables, otra para comprobar las causas por las que la variable representa un peligro y la última donde se analicen las recomendaciones que se pueden seguir en caso de que ocurra una falla provocada por esa causa. Si el trabajador logra superar estas etapas, puede darse por aprobado el entrenamiento de ese proceso.

\subsection{Modelo de dominio}
Un modelo de dominio es la representación de las clases conceptuales del mundo real, no de componentes de software. Su utilidad radica en ser una forma de inspiración para el diseño de entidades. Es el artefacto clave en el análisis orientado a objetos \cite{Herchi2012}.

El modelo de dominio de este sistema (\textsl{Figura \ref{fig:dominio}}) no es muy diferente al modelo origina del sistema SECPROIT. A la hora de representarlo, se tuvieron en cuenta una serie de colores a modo de guía:

\begin{itemize}
\item \textbf{Azul}: representa aquellas entidades que no sufrieron ningún cambio significativo con respecto al sistema anterior
\item \textbf{Amarillo}: representa aquellas entidades que fueron modificadas, pero que siguen cumpliendo las mismas funciones
\item \textbf{Verde}: representa las entidades que son totalmente nuevas, que no existen el sistema anterior
\end{itemize}

\begin{figure}[h]
\centering
 \includegraphics[width=0.7\linewidth]{imagen/dominio.png}
 \caption{Modelo de dominio}
 \label{fig:dominio} 
\end{figure}

La razón por la que algunas entidades (\textsl{Tabla \ref{tab:ent-azul}})  no sufrieron cambios es porque, basados en las tareas que desempeñan, no varían sus funciones con este nuevo modelo. Sin embargo, más adelante pueden presentar modificaciones en algunos aspectos.
Las entidades que cambiaron (\textsl{Tabla \ref{tab:ent-amarilla}}), indican que también se realizaron arreglos en la estructura que estas seguían, es decir, variaciones en la base de datos y en las clases del sistema.
Por último, las entidades nuevas (\textsl{Tabla \ref{tab:ent-verde}}) son clases que fueron agregadas desde cero para rectificar alguna limitación.

\begin{table}[h]
\begin{center}
\begin{tabular}{ | c | p{10cm} | }
\hline
\textbf{Entidad} & \textbf{Descripción} \\
\hline
Área & Representa el lugar donde laboran los trabajadores, posee un identificador y es donde están presentes los procesos \\
\hline
Usuario & Representa a la persona que va interactuar con el sistema \\
\hline
Administrador & Es un tipo de usuario, se encarga de administrar las entidades del sistema (áreas y demás usuarios) \\
\hline
Operario & Es un tipo de usuario, se encarga de realizar los entrenamientos \\
\hline
Base de datos & Representa el archivo \textsf{anm} \\
\hline
Base de reglas & Representa el archivo \textsf{drl} \\
\hline
Drools & Es la entidad que permite ejecutar las reglas del proceso \\
\hline
Variable & Forma parte de la información contenida en la base de datos del proceso, se evalúan en la primera etapa \\
\hline
Causa & Forma parte de la información contenida en la base de datos del proceso, se evalúan en la segunda etapa \\
\hline
Recm. & Forma parte de la información contenida en la base de datos del proceso, representa las recomendaciones y se evalúan en la tercera etapa \\
\hline
Variable-Causa & Forma parte de la información contenida en la base de reglas del proceso, se evalúan en la primera etapa \\
\hline
Causa-Recm. & Forma parte de la información contenida en la base de reglas del proceso, se evalúan en la primera etapa \\
\hline
\end{tabular}
\caption{Modelo de dominio: entidades que no sufrieron cambios}
\label{tab:ent-azul}
\end{center}
\end{table}

\begin{table}[H]
\begin{center}
\begin{tabular}{ | c | p{5cm} |  p{5cm} | }
\hline
\textbf{Entidad} & \textbf{Descripción} & \textbf{Cambios}\\
\hline
Sistema SECPROIT & Representa el sistema & Cambian sus entidades y funciones \\
\hline
Jefe e área & Es un tipo de usuario, administrar los procesos & Antes era especialista y solo creaba los procesos \\
\hline
Proceso & Representa los procesos & Se le agrega un nuevo atributo: la configuración \\
\hline
Entrenamiento & Representa el entrenamiento del usuario & Se le agregan las etapas \\
\hline
\end{tabular}
\caption{Modelo de dominio: entidades que sufrieron cambios}
\label{tab:ent-amarilla}
\end{center}
\end{table}

\begin{table}[t]
\begin{center}
\begin{tabular}{ | c | p{10cm} | }
\hline
\textbf{Entidad} & \textbf{Descripción} \\
\hline
Configuración & Representa la configuración de un proceso, es decir, las características que este posee para generar un entrenamiento \\
\hline
Etapas & Representa las etapas del entrenamiento, existen tres por cada uno \\
\hline
E-Variable & Es un tipo de etapa, donde se evalúan las variables \\
\hline
E-Causa & Es un tipo de etapa, donde se evalúan las causas \\
\hline
E-Recm. & Es un tipo de etapa, donde se evalúan las recomendaciones \\
\hline
\end{tabular}
\caption{Modelo de dominio: entidades nuevas}
\label{tab:ent-verde}
\end{center}
\end{table}

\subsection{Reglas del negocio}
Las reglas de un negocio son directrices y restricciones que ayudan a regular las operaciones de una entidad determinada. Para cada proceso existen reglas que deben seguirse durante la ejecución, ya que estas ayudan a definir \textbf{cómo} deben realizarse las tareas, por \textbf{quién}, \textbf{cuándo}, \textbf{dónde} y \textbf{por qué} \cite{Chisholm2007}. A modo de resumen, las reglas de un negocio son límites impuestos a las operaciones para que estén en sintonía con las políticas y objetivos de la institución.

En el sistema SECPROIT existen un conjunto de reglas primordiales que no se deben dejar de cumplir. Estas son:
\begin{itemize}
\item Cada usuario debe poseer un único rol
\item Para poder introducir un nuevo usuario debe existir, al menos, un área laboral
\item Un usuario no puede pertenecer a más de un área
\item Para poder introducir un nuevo proceso debe existir, al menos, un área laboral
\item Un proceso no puede pertenecer a más de un área
\item Para generar un nuevo entrenamiento debe existir, al menos, un usuario que cumpla el rol de operario y un proceso que sea de la misma área que el operario
\item Para entrenar en la etapa de las causas debe haberse aprobado la etapa de las variables
\item Para entrenar en la etapa de las recomendaciones debe haberse aprobado la etapa de las causas
\item Los usuarios con rol de administrador son los únicos que pueden gestionar las áreas y las cuentas de los usuarios
\item No se puede eliminar la cuenta de un usuario
\item Los usuarios con rol de jefe de área son los únicos que pueden gestionar los procesos de sus áreas y configurar los entrenamientos
\item Los usuarios con rol de operario son los únicos que pueden entrenar
\item Para que un usuario supere un entrenamiento debe haber aprobado las tres etapas (variables, causas y recomendaciones)
\end{itemize} 